<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="Keywords" content="">
<meta name="Description" content="">
<title>replace方法的认识</title>
<style type="text/css">
	* {margin:0;padding:0;}
	body{font-size:12px;font-family:"微软雅黑";}
	ul,li{list-style:none;}
	a{text-decoration:none;}
	#box{margin-left:20px;}
</style>
</head>
<body>
	<input type="text" id="txt"/><input type="button" id="btn" value="留言"/>
	<div id="box"></div>
	<script type="text/javascript">
		var txtDom = document.getElementById("txt");
		var btnDom = document.querySelector("#btn");
		var boxDom = document.querySelector("#box");
		var reg = /sb|傻|死|恶心/g;
		/*btnDom.onclick = function(){
			var val = txtDom.value
			txtDom.value = "";
			if(val){
				val = val.replace(reg,"*");
			}
			var op = document.createElement("p");
			op.innerHTML = val;
			boxDom.appendChild(op);
		};*/
		btnDom.onclick = function(){
			var val = txtDom.value;
			
			txtDom.value = "";
			if(val){
				//s表示匹配成功后的要替换的字符串
				val = val.replace(reg,function(s){
					//写在这里就是每次匹配成功就清空res
					var res = "";
					for(var i=0;i<s.length;i++){
						res += "*";
					}
					//返回要替换的新字符串
					return res;
				});
			}
			var op = document.createElement("p");
			op.innerHTML = val;
			boxDom.appendChild(op);
		};
	</script>
</body>
</html>
